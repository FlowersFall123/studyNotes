# **æ•°æ®åº“ç´¢å¼• **

ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªæœ€å…¸åž‹çš„ç”¨æˆ·è¡¨æ¥æ¼”ç¤ºðŸ‘‡

```
CREATE TABLE user (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50),
    age INT,
    email VARCHAR(100)
);
```

------

## 1ï¸âƒ£ ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ

ä½ åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼š

```
CREATE INDEX idx_age ON user(age);
```

æ•°æ®åº“å†…éƒ¨ä¼šç”Ÿæˆä¸€ä¸ªç´¢å¼•ç»“æž„ï¼ˆç±»ä¼¼å°è¡¨ï¼‰ï¼š

| age  | id   |
| ---- | ---- |
| 18   | 1    |
| 18   | 3    |
| 22   | 2    |
| 25   | 5    |

æ³¨æ„è¿™åªæ˜¯é€»è¾‘ç†è§£ï¼ŒçœŸå®žå­—æ®µç»“æž„æ˜¯ **B+Tree**ï¼Œä¸æ˜¯è¡¨ã€‚

------

## 2ï¸âƒ£ æŸ¥è¯¢æ—¶ç´¢å¼•å¦‚ä½•åŠ é€Ÿï¼Ÿ

ä½ æ‰§è¡Œ SQLï¼š

```
SELECT * FROM user WHERE age = 18;
```

æŸ¥è¯¢æµç¨‹å¦‚ä¸‹ðŸ‘‡

### âœ” **æ­¥éª¤1ï¼šä»Žç´¢å¼•æŸ¥â€œage = 18â€**

ç´¢å¼•ç»“æž„ä¼šå¿«é€Ÿå®šä½èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å¯¹åº”ä¸»é”®ï¼š

```
age=18 â†’ ä¸»é”®ID = 1ã€3
```

è¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹æ˜¯ O(log n) ï¼Œé€Ÿåº¦éžå¸¸å¿«ã€‚

### âœ” **æ­¥éª¤2ï¼šå†æ ¹æ®ä¸»é”®æ‹¿æ•´è¡Œï¼ˆå›žè¡¨ï¼‰**

```
id=1 â†’ æŸ¥åˆ°æ•´è¡Œæ•°æ®
id=3 â†’ æŸ¥åˆ°æ•´è¡Œæ•°æ®
```

**è¿™å°±æ˜¯ç´¢å¼•åŠ é€Ÿçš„æ ¸å¿ƒæœºåˆ¶ï¼**

------

## 3ï¸âƒ£ æ²¡æœ‰ç´¢å¼•ä¼šæ€Žæ ·ï¼Ÿ

å¦‚æžœ `age` æ²¡æœ‰å»ºç«‹ç´¢å¼•ï¼š

```
SELECT * FROM user WHERE age = 18;
```

æ•°æ®åº“åªèƒ½ï¼š

- ä»Žç¬¬ 1 è¡Œå¼€å§‹é€è¡Œæ‰«æ
- çœ‹ age æ˜¯ä¸æ˜¯ 18
- ç›´åˆ°æ‰«æå®Œæ‰€æœ‰è¡Œ

è¿™å« **å…¨è¡¨æ‰«æï¼ˆéžå¸¸æ…¢ï¼‰**ã€‚

ðŸ“Œ æ€»ç»“ä¸€å¥è¯ï¼š

> **æœ‰ç´¢å¼•ï¼šå…ˆæŸ¥ç´¢å¼•ï¼Œå†å›žè¡¨ â†’ å¿«**
>  **æ²¡ç´¢å¼•ï¼šä»Žå¤´åˆ°å°¾æ‰¾ â†’ æ…¢**

------

## 4ï¸âƒ£ æ¨¡ç³ŠæŸ¥è¯¢çš„ä¾‹å­

### âœ” å¯ä»¥ç”¨ç´¢å¼•çš„æŸ¥è¯¢

```
SELECT * FROM user WHERE name LIKE 'Tom%';
```

å› ä¸º `%` åœ¨åŽé¢ï¼Œ**ç´¢å¼•å¯ä»¥åˆ©ç”¨å‰ç¼€è§„åˆ™**ã€‚

------

### âŒ ä¸èƒ½ç”¨ç´¢å¼•çš„æŸ¥è¯¢

```
SELECT * FROM user WHERE name LIKE '%Tom%';
```

å› ä¸º `%` åœ¨å‰é¢ï¼Œç´¢å¼•æ²¡åŠžæ³•è¿›è¡Œå‰ç¼€åŒ¹é… â†’ ä¼šå…¨è¡¨æ‰«æã€‚

**é€šä¿—è§£é‡Šï¼š**
 ä½ çœ‹ä¸€æœ¬ä¹¦ï¼Œç›®å½•æ˜¯æŒ‰â€œæ ‡é¢˜å¼€å¤´â€æŽ’åºçš„ï¼Œ
 å¦‚æžœä½ æ‰¾â€œä»¥è´­ç‰©ç»“å°¾çš„æ ‡é¢˜â€ï¼Œç›®å½•å¸®ä¸äº†ä½ ã€‚

------

## 5ï¸âƒ£ è”åˆç´¢å¼•çš„ä¾‹å­

å»ºè”åˆç´¢å¼•ï¼š

```
CREATE INDEX idx_name_age ON user(name, age);
```

å®ƒçš„æŽ’åºæ–¹å¼ç±»ä¼¼ï¼š

| name  | age  | id   |
| ----- | ---- | ---- |
| Alice | 18   | 5    |
| Alice | 20   | 6    |
| Bob   | 19   | 3    |
| Bob   | 25   | 7    |
| Tom   | 18   | 1    |

------

### âœ” èƒ½ç”¨ä¸Šç´¢å¼•çš„æŸ¥è¯¢

#### â‘  ä½¿ç”¨ nameï¼ˆæœ€å·¦å­—æ®µï¼‰

```
SELECT * FROM user WHERE name = 'Tom';
```

ðŸ‘‰ **èƒ½ç”¨ç´¢å¼•**

------

#### â‘¡ ä½¿ç”¨ name + age

```
SELECT * FROM user WHERE name = 'Tom' AND age = 18;
```

ðŸ‘‰ **æ›´èƒ½ç”¨ç´¢å¼•ï¼ˆä¸¤ä¸ªå­—æ®µéƒ½ç”¨åˆ°ï¼‰**

------

### âŒ ä¸èƒ½ç”¨ç´¢å¼•çš„æŸ¥è¯¢

```
SELECT * FROM user WHERE age = 18;
```

ðŸ‘‰ ä¸èƒ½ç”¨ç´¢å¼•ï¼Œå› ä¸ºæ²¡æœ‰ä»Ž **æœ€å·¦å­—æ®µ name** å¼€å§‹ã€‚

ðŸ“Œ ä¸€å¥è¯æ€»ç»“ï¼š

> **è”åˆç´¢å¼•å¿…é¡»ä»Žæœ€å·¦å­—æ®µå¼€å§‹æ‰èƒ½ç”Ÿæ•ˆã€‚**

------

## 6ï¸âƒ£ è¦†ç›–ç´¢å¼•çš„ä¾‹å­

å¦‚æžœä½ æŸ¥è¯¢çš„å­—æ®µå…¨éƒ¨åœ¨ç´¢å¼•é‡Œï¼Œä¾‹å¦‚ï¼š

```
SELECT name, age FROM user WHERE name = 'Tom';
```

å› ä¸ºè”åˆç´¢å¼• `idx_name_age` ä¸­åŒ…å«ï¼š

| name | age  | id   |
| ---- | ---- | ---- |

æ‰€ä»¥ï¼š

- ä¸éœ€è¦å›žè¡¨ï¼
- ç›´æŽ¥ä»Žç´¢å¼•ä¸­è¿”å›žç»“æžœï¼ˆæœ€å¿«çš„æŸ¥è¯¢ï¼‰

è¿™å« **è¦†ç›–ç´¢å¼•**ã€‚

------

## 7ï¸âƒ£ å®žé™…å¼€å‘ä¸­è¯¥ç»™å“ªäº›å­—æ®µåŠ ç´¢å¼•ï¼Ÿ

### âœ” åº”è¯¥åŠ ç´¢å¼•ï¼ˆé«˜é¢‘æŸ¥è¯¢ï¼‰ï¼š

- ç™»å½•æŸ¥è¯¢çš„ username/email

```
CREATE INDEX idx_email ON user(email);
```

- æŒ‰å¹´é¾„ç­›é€‰ï¼š

```
WHERE age BETWEEN 20 AND 30
```

- ç»å¸¸ç”¨äºŽæŽ’åºï¼š

```
ORDER BY create_time
```

- ç»å¸¸ç”¨äºŽ JOINï¼š

```
user.id = order.user_id
```

------

### âŒ ä¸é€‚åˆå»ºç´¢å¼•ï¼š

- æ€§åˆ«ï¼ˆåªæœ‰ç”·/å¥³ï¼‰ â†’ é‡å¤å¤ªå¤š
- æ˜¯å¦åˆ é™¤ï¼ˆ0/1ï¼‰
- æ–‡æœ¬ã€å¤§å­—æ®µ

------

## å®Œæ•´ç»“è®º

> **ç´¢å¼•å°±æ˜¯æ ¹æ®æŸåˆ—ï¼ˆæˆ–å‡ åˆ—ï¼‰å¿«é€Ÿæ‰¾åˆ°æ•°æ®è¡Œä¸»é”®ï¼Œç„¶åŽå†åŽ»è¡¨é‡Œæ‹¿å®Œæ•´æ•°æ®çš„â€œåŠ é€Ÿç›®å½•â€ã€‚
>  æŸ¥è¯¢æ—¶æœ‰ç´¢å¼•å°±å…ˆæŸ¥ç›®å½•ï¼Œæ²¡æœ‰ç´¢å¼•å°±ä¸€ä¸ªä¸ªæ‰¾ã€‚**